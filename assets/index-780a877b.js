import{r as s,U as f,j as c,F as y,a,E as k,D as M,P,b as w,d as I,p as U,u as D,B as F,M as S,c as b,e as C,A as j,S as B,C as K}from"./index-5264d8cb.js";const V=({content:e,caption:n,setCaption:p,onDelete:d})=>{var h;const i=s.useContext(f),t=((h=e.metadata.customMetadata)==null?void 0:h.pinned)==="true",[u,o]=s.useState(!1),l=async()=>{await I(e.metadata.name),d(e)},m=()=>{U(e.metadata.name,!t)},v=()=>{o(!u)},x=r=>{r.key==="Enter"&&(D(e.metadata.name,n),o(!1))};return c(y,{children:[u&&a(k,{autoFocus:!0,onKeyDown:r=>x(r),value:n,onChange:r=>p(r.target.value)}),i&&a(M,{onClick:l,children:"Delete"}),i&&a(P,{onClick:m,children:t?"Unpin":"Pin"}),i&&a(w,{onClick:v,children:"Edit"})]})},E=({firebaseContent:e,onClick:n})=>c(F,{loop:!0,autoPlay:!0,playsInline:!0,muted:!0,onClick:n,children:[a("source",{src:e.downloadUrl,type:g.MP4}),a("meta",{itemProp:"name",content:e.metadata.name})]});var g=(e=>(e.MP4="video/mp4",e.QUICKTIME="video/quicktime",e))(g||{});const A=({content:e,onDelete:n})=>{var m;const p=s.useContext(f),[d,i]=s.useState(((m=e.metadata.customMetadata)==null?void 0:m.caption)||""),[t,u]=s.useState(!1),o=e.metadata.contentType==="video/mp4"||e.metadata.contentType==="video/quicktime",l=()=>{u(!t)};return s.useEffect(()=>(t&&(document.body.style.overflow="hidden"),()=>{document.body.style.overflow="unset"}),[t]),c(y,{children:[t&&a(S,{onClick:l,children:a(b,{children:o?a(E,{firebaseContent:e}):a(C,{src:e.downloadUrl,alt:e.metadata.name})})}),c(j,{children:[c("div",{children:[a(B,{children:o?a(E,{firebaseContent:e,onClick:l}):a(C,{onClick:l,src:e.downloadUrl,alt:e.metadata.name})}),d&&a(K,{children:d})]}),p&&a(V,{content:e,onDelete:n,caption:d,setCaption:i})]})]})};export{g as ContentType,A as default};
